(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{6262:function(e,t,r){Promise.resolve().then(r.bind(r,8199))},8199:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var a=r(7437),n=r(9376),s=r(7648),o=r(9763);let c=(0,o.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var i=r(5805),l=r(8420),u=r(3327),d=r(1723),h=r(1047),m=r(2096),f=r(5131),y=r(1884);let p=(0,o.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var g=r(8728);function x(){let e=(0,n.usePathname)(),t=[{name:"Dashboard",href:"/admin",icon:c},{name:"Acteurs",href:"/admin/actors",icon:i.Z},{name:"Associations",href:"/admin/associations",icon:l.Z},{name:"Accr\xe9ditations",href:"/admin/accreditations",icon:u.Z},{name:"Demandes en attente",href:"/admin/pending",icon:d.Z},{name:"\xc9v\xe9nements",href:"/admin/events",icon:h.Z},{name:"Actualit\xe9s",href:"/admin/news",icon:m.Z},{name:"Suspendus",href:"/admin/suspended",icon:f.Z},{name:"Utilisateurs",href:"/admin/users",icon:y.Z},{name:"Statistiques",href:"/admin/stats",icon:p},{name:"Param\xe8tres",href:"/admin/settings",icon:g.Z}];return(0,a.jsxs)("aside",{className:"w-64 bg-blue-900 min-h-screen text-white",children:[(0,a.jsx)("div",{className:"p-6 border-b border-blue-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("span",{className:"text-3xl font-bold text-red-500 tracking-tight",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.3), -1px -1px 2px rgba(255,255,255,0.2)",letterSpacing:"-0.02em"},children:"MATA"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-bold text-lg text-white",children:"Admin"}),(0,a.jsx)("p",{className:"text-xs text-blue-200",children:"Administration"})]})]})}),(0,a.jsx)("nav",{className:"p-4",children:(0,a.jsx)("ul",{className:"space-y-2",children:t.map(t=>{let r=t.icon,n=e===t.href||"/admin"!==t.href&&(null==e?void 0:e.startsWith(t.href));return(0,a.jsx)("li",{children:(0,a.jsxs)(s.default,{href:t.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(n?"bg-blue-800 text-white":"text-blue-200 hover:bg-blue-800 hover:text-white"),children:[(0,a.jsx)(r,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:t.name}),t.badge&&(0,a.jsx)("span",{className:"ml-auto bg-amber-500 text-white text-xs px-2 py-1 rounded-full",children:t.badge})]})},t.href)})})})]})}var k=r(2265),v=r(6023);function w(e){let{children:t}=e,r=(0,n.useRouter)(),s=(0,n.usePathname)(),o=(0,k.useRef)(!1),c=()=>{let e=(0,v.$8)(),t=(0,v.ts)();return e&&t&&"admin"===t.role},[i,l]=(0,k.useState)(()=>c()),[u,d]=(0,k.useState)(!0);return((0,k.useEffect)(()=>{if(o.current)return;if("/admin/login"===s){d(!1);return}let e=(0,v.$8)(),t=(0,v.ts)();if(!e||!t||"admin"!==t.role){o.current=!0,r.replace("/admin/login");return}l(!0),d(!1)},[r,s]),"/admin/login"===s||i&&!u)?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"V\xe9rification de l'authentification..."})]})})}function Z(e){let{children:t}=e;return"/admin/login"===(0,n.usePathname)()?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(w,{children:(0,a.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,a.jsx)(x,{}),(0,a.jsx)("main",{className:"flex-1 overflow-x-hidden",children:t})]})})}},9116:function(e,t,r){"use strict";r.d(t,{Bt:function(){return i},aL:function(){return l},eJ:function(){return c},jB:function(){return d},kN:function(){return h},sZ:function(){return s},wL:function(){return n},yM:function(){return o},zX:function(){return u}});let a=r(3464).Z.create({baseURL:"http://localhost:8000/api",headers:{Accept:"application/json"},withCredentials:!0});{let e=localStorage.getItem("auth_token");e&&(a.defaults.headers.common.Authorization="Bearer ".concat(e))}a.interceptors.request.use(e=>{{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData&&delete e.headers["Content-Type"]}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("token"),localStorage.removeItem("user"),delete a.defaults.headers.common.Authorization),Promise.reject(e)});let n=async e=>{try{let t="/tourism-actors".concat(e?"?".concat(e):"");console.log("Fetching from URL:",a.defaults.baseURL+t);let r=await a.get(t);if(console.log("API Response:",r.data),r.data.success&&Array.isArray(r.data.data))return r.data.data;return console.warn("Unexpected response format:",r.data),[]}catch(e){throw console.error("Error fetching actors:",e),e.response&&console.error("Response error:",e.response.data),e}},s=async e=>{try{let t=await a.get("/events".concat(e?"?".concat(e):""));if(t.data.success&&Array.isArray(t.data.data))return t.data.data;return[]}catch(e){throw console.error("Error fetching events:",e),e}},o=async e=>{try{return(await a.post("/events",e)).data.data}catch(e){throw console.error("Error creating event:",e),e}},c=async(e,t)=>{try{return(await a.put("/events/".concat(e),t)).data.data}catch(e){throw console.error("Error updating event:",e),e}},i=async e=>{try{await a.delete("/events/".concat(e))}catch(e){throw console.error("Error deleting event:",e),e}},l=async e=>{try{let t=await a.get("/news".concat(e?"?".concat(e):""));if(t.data.success&&Array.isArray(t.data.data))return t.data.data;return[]}catch(e){throw console.error("Error fetching news:",e),e}},u=async e=>{try{return(await a.post("/news",e)).data.data}catch(e){throw console.error("Error creating news:",e),e}},d=async(e,t)=>{try{console.log("Updating news with FormData:",e),t.has("_method")||t.append("_method","PUT");let r=await a.post("/news/".concat(e),t);if(console.log("Update response:",r.data),r.data.success)return r.data.data;throw Error(r.data.message||"Erreur lors de la mise \xe0 jour")}catch(e){throw console.error("Error updating news:",e),e.response&&(console.error("Error response status:",e.response.status),console.error("Error response data:",e.response.data)),e}},h=async e=>{try{await a.delete("/news/".concat(e))}catch(e){throw console.error("Error deleting news:",e),e}};t.ZP=a},6023:function(e,t,r){"use strict";r.d(t,{$8:function(){return i},Z5:function(){return l},bW:function(){return c},kS:function(){return s},ts:function(){return o},x4:function(){return n}});var a=r(9116);let n=async(e,t)=>{try{let r=await a.ZP.post("/auth/login",{email:e,password:t});return r.data.success&&r.data.data.token&&(localStorage.setItem("auth_token",r.data.data.token),localStorage.setItem("auth_user",JSON.stringify(r.data.data.user)),a.ZP.defaults.headers.common.Authorization="Bearer ".concat(r.data.data.token)),r.data}catch(e){throw console.error("Login error:",e),e}},s=async()=>{try{await a.ZP.post("/auth/logout")}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),delete a.ZP.defaults.headers.common.Authorization}},o=()=>{let e=localStorage.getItem("auth_user");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},c=()=>localStorage.getItem("auth_token"),i=()=>!!c(),l=()=>{let e=c();e&&(a.ZP.defaults.headers.common.Authorization="Bearer ".concat(e))}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{color:c="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:h,...m}=r;return(0,a.createElement)("svg",{ref:o,...n,width:i,height:i,stroke:c,strokeWidth:u?24*Number(l)/Number(i):l,className:["lucide","lucide-".concat(s(e)),d].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},3327:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},8420:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2096:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]])},8728:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1884:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},5131:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var a=r(2972),n=r.n(a)},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[3464,2972,2971,2117,1744],function(){return e(e.s=6262)}),_N_E=e.O()}]);