(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2930],{5816:function(e,t,r){Promise.resolve().then(r.bind(r,2227))},2227:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(7437),s=r(2265),n=r(3247),c=r(3327),o=r(2208),i=r(4630),l=r(2451),d=r(407),u=r(9116),p=r(7648),h=r(8695);function m(){let[e,t]=(0,s.useState)([]),[r,m]=(0,s.useState)(!0),[x,g]=(0,s.useState)(""),[f,y]=(0,s.useState)({current_page:1,last_page:1,per_page:25,total:0});(0,s.useEffect)(()=>{w()},[x,f.current_page,f.per_page]);let w=async()=>{m(!0);try{let e=new URLSearchParams;e.append("all_status","true"),e.append("accredited","true"),x&&e.append("search",x),e.append("per_page",f.per_page.toString()),e.append("page",f.current_page.toString());let r=await u.ZP.get("/tourism-actors?".concat(e.toString()));r.data.success&&(t(r.data.data),r.data.pagination&&y(e=>({...e,...r.data.pagination,per_page:f.per_page})))}catch(e){console.error("Error loading accredited actors:",e)}finally{m(!1)}},b=e=>{y(t=>({...t,current_page:e})),window.scrollTo({top:0,behavior:"smooth"})},j=e=>{y(t=>({...t,per_page:e,current_page:1}))},v={hotel:"H\xf4tel",restaurant:"Restaurant",travel_agency:"Agence de Voyage",tour_guide:"Guide Touristique",transport:"Transport",attraction:"Attraction",other:"Autre"};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(h.Z,{title:"Acteurs Accr\xe9dit\xe9s",subtitle:"Liste des acteurs avec accr\xe9ditation MATA"}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-5 mb-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email, ville...",value:x,onChange:e=>{g(e.target.value),y(e=>({...e,current_page:1}))},className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-blue-900 text-gray-900 bg-white"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r?(0,a.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Aucun acteur accr\xe9dit\xe9 trouv\xe9"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ville / R\xe9gion"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Num\xe9ro d'accr\xe9ditation"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.email&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:v[e.type]||e.type})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.city,", ",e.region]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-amber-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-amber-600",children:e.accreditation_number})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(p.default,{href:"/actors/".concat(e.id),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Voir"]}),(0,a.jsxs)(p.default,{href:"/admin/actors?edit=".concat(e.id),className:"text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),"Modifier"]})]})})]},e.id))})]})}),f.total>0&&(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Affichage de ",(0,a.jsx)("span",{className:"font-medium",children:(f.current_page-1)*f.per_page+1})," \xe0"," ",(0,a.jsx)("span",{className:"font-medium",children:Math.min(f.current_page*f.per_page,f.total)})," ","sur ",(0,a.jsx)("span",{className:"font-medium",children:f.total})," r\xe9sultats"]}),(0,a.jsxs)("select",{value:f.per_page,onChange:e=>j(Number(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-sm",children:[(0,a.jsx)("option",{value:25,children:"25 par page"}),(0,a.jsx)("option",{value:100,children:"100 par page"}),(0,a.jsx)("option",{value:1e3,children:"1000 par page"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>b(f.current_page-1),disabled:1===f.current_page||r,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(l.Z,{className:"w-5 h-5"})}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let e=[],t=f.last_page,r=f.current_page;if(t<=7)for(let r=1;r<=t;r++)e.push(r);else{e.push(1),r>3&&e.push("...");for(let a=Math.max(2,r-1);a<=Math.min(t-1,r+1);a++)e.push(a);r<t-2&&e.push("..."),e.push(t)}return e})().map((e,t)=>"..."===e?(0,a.jsx)("span",{className:"px-4 py-2 text-gray-500",children:"..."},t):(0,a.jsx)("button",{onClick:()=>b(e),disabled:r,className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(e===f.current_page?"bg-blue-900 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"," disabled:opacity-50"),children:e},e))}),(0,a.jsx)("button",{onClick:()=>b(f.current_page+1),disabled:f.current_page===f.last_page||r,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]})]})})]})})]})]})}},8695:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(7437);function s(e){let{title:t,subtitle:r,actions:s}=e;return(0,a.jsx)("header",{className:"bg-blue-900 shadow-md border-b border-blue-800",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-white font-serif tracking-tight",children:t}),(0,a.jsx)("p",{className:"text-sm text-blue-200 mt-1 font-normal",children:r})]}),s&&(0,a.jsx)("div",{className:"flex items-center gap-3",children:s})]})})})}},9116:function(e,t,r){"use strict";r.d(t,{Bt:function(){return i},aL:function(){return l},eJ:function(){return o},jB:function(){return u},kN:function(){return p},sZ:function(){return n},wL:function(){return s},yM:function(){return c},zX:function(){return d}});let a=r(3464).Z.create({baseURL:"http://localhost:8000/api",headers:{Accept:"application/json"},withCredentials:!0});{let e=localStorage.getItem("auth_token");e&&(a.defaults.headers.common.Authorization="Bearer ".concat(e))}a.interceptors.request.use(e=>{{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData&&delete e.headers["Content-Type"]}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("token"),localStorage.removeItem("user"),delete a.defaults.headers.common.Authorization),Promise.reject(e)});let s=async e=>{try{let t="/tourism-actors".concat(e?"?".concat(e):"");console.log("Fetching from URL:",a.defaults.baseURL+t);let r=await a.get(t);if(console.log("API Response:",r.data),r.data.success&&Array.isArray(r.data.data))return r.data.data;return console.warn("Unexpected response format:",r.data),[]}catch(e){throw console.error("Error fetching actors:",e),e.response&&console.error("Response error:",e.response.data),e}},n=async e=>{try{let t=await a.get("/events".concat(e?"?".concat(e):""));if(t.data.success&&Array.isArray(t.data.data))return t.data.data;return[]}catch(e){throw console.error("Error fetching events:",e),e}},c=async e=>{try{return(await a.post("/events",e)).data.data}catch(e){throw console.error("Error creating event:",e),e}},o=async(e,t)=>{try{return(await a.put("/events/".concat(e),t)).data.data}catch(e){throw console.error("Error updating event:",e),e}},i=async e=>{try{await a.delete("/events/".concat(e))}catch(e){throw console.error("Error deleting event:",e),e}},l=async e=>{try{let t=await a.get("/news".concat(e?"?".concat(e):""));if(t.data.success&&Array.isArray(t.data.data))return t.data.data;return[]}catch(e){throw console.error("Error fetching news:",e),e}},d=async e=>{try{return(await a.post("/news",e)).data.data}catch(e){throw console.error("Error creating news:",e),e}},u=async(e,t)=>{try{console.log("Updating news with FormData:",e),t.has("_method")||t.append("_method","PUT");let r=await a.post("/news/".concat(e),t);if(console.log("Update response:",r.data),r.data.success)return r.data.data;throw Error(r.data.message||"Erreur lors de la mise \xe0 jour")}catch(e){throw console.error("Error updating news:",e),e.response&&(console.error("Error response status:",e.response.status),console.error("Error response data:",e.response.data)),e}},p=async e=>{try{await a.delete("/news/".concat(e))}catch(e){throw console.error("Error deleting news:",e),e}};t.ZP=a},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,t)=>{let r=(0,a.forwardRef)((r,c)=>{let{color:o="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:u="",children:p,...h}=r;return(0,a.createElement)("svg",{ref:c,...s,width:i,height:i,stroke:o,strokeWidth:d?24*Number(l)/Number(i):l,className:["lucide","lucide-".concat(n(e)),u].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(p)?p:[p]])});return r.displayName="".concat(e),r}},3327:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},2451:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4630:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(2972),s=r.n(a)}},function(e){e.O(0,[3464,2972,2971,2117,1744],function(){return e(e.s=5816)}),_N_E=e.O()}]);