(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1986],{1066:function(e,t,r){Promise.resolve().then(r.bind(r,2475))},2475:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var s=r(7437),a=r(2265),n=r(8842),l=r(265),i=r(5051);let o=(0,r(9763).Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var c=r(9397),d=r(2208),u=r(6901),m=r(1723),x=r(3327),h=r(3247),p=r(4630),g=r(8930),f=r(2451),j=r(407),b=r(7648),y=r(9116),v=r(2489);function N(e){let{actor:t,onClose:r}=e,[n,l]=(0,a.useState)({name:"",name_ar:"",type:"hotel",category:"",description:"",address:"",city:"",region:"",phone:"",email:"",website:"",accreditation_number:"",status:"active",verified:!1}),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&l({name:t.name,name_ar:t.name_ar||"",type:t.type,category:t.category||"",description:t.description||"",address:t.address,city:t.city,region:t.region,phone:t.phone||"",email:t.email||"",website:t.website||"",accreditation_number:t.accreditation_number||"",status:t.status,verified:t.verified})},[t]);let u=async e=>{e.preventDefault(),d(""),o(!0);try{t?await y.ZP.put("/tourism-actors/".concat(t.id),n):await y.ZP.post("/tourism-actors",n),r()}catch(e){var s,a;d((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Erreur lors de l'enregistrement")}finally{o(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Modifier l'acteur":"Ajouter un acteur"}),(0,s.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)(v.Z,{className:"w-5 h-5"})})]}),c&&(0,s.jsx)("div",{className:"mx-6 mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:c})}),(0,s.jsxs)("form",{onSubmit:u,className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom *"}),(0,s.jsx)("input",{type:"text",required:!0,value:n.name,onChange:e=>l({...n,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom (Arabe)"}),(0,s.jsx)("input",{type:"text",value:n.name_ar,onChange:e=>l({...n,name_ar:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),(0,s.jsxs)("select",{required:!0,value:n.type,onChange:e=>l({...n,type:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white",children:[(0,s.jsx)("option",{value:"hotel",children:"H\xf4tel"}),(0,s.jsx)("option",{value:"restaurant",children:"Restaurant"}),(0,s.jsx)("option",{value:"travel_agency",children:"Agence de Voyage"}),(0,s.jsx)("option",{value:"tour_guide",children:"Guide Touristique"}),(0,s.jsx)("option",{value:"transport",children:"Transport"}),(0,s.jsx)("option",{value:"attraction",children:"Attraction"}),(0,s.jsx)("option",{value:"other",children:"Autre"}),(0,s.jsx)("option",{value:"association",children:"Association"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cat\xe9gorie"}),(0,s.jsxs)("select",{value:n.category,onChange:e=>l({...n,category:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white",children:[(0,s.jsx)("option",{value:"",children:"S\xe9lectionner"}),(0,s.jsx)("option",{value:"luxury",children:"Luxe"}),(0,s.jsx)("option",{value:"premium",children:"Premium"}),(0,s.jsx)("option",{value:"standard",children:"Standard"}),(0,s.jsx)("option",{value:"budget",children:"\xc9conomique"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:n.description,onChange:e=>l({...n,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse *"}),(0,s.jsx)("input",{type:"text",required:!0,value:n.address,onChange:e=>l({...n,address:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ville *"}),(0,s.jsx)("input",{type:"text",required:!0,value:n.city,onChange:e=>l({...n,city:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R\xe9gion *"}),(0,s.jsx)("input",{type:"text",required:!0,value:n.region,onChange:e=>l({...n,region:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,s.jsx)("input",{type:"text",value:n.phone,onChange:e=>l({...n,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:n.email,onChange:e=>l({...n,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site web"}),(0,s.jsx)("input",{type:"url",value:n.website,onChange:e=>l({...n,website:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Num\xe9ro d'accr\xe9ditation (Badge)",(0,s.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Optionnel - g\xe9n\xe9r\xe9 automatiquement si vide)"})]}),(0,s.jsx)("input",{type:"text",value:n.accreditation_number,onChange:e=>l({...n,accreditation_number:e.target.value}),placeholder:"MATA-XXXX-XXXX",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Si un num\xe9ro est fourni, l'acteur aura le badge d'accr\xe9ditation. L'acteur sera automatiquement approuv\xe9."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Statut *",(0,s.jsx)("span",{className:"text-xs text-green-600 ml-2",children:"(Auto: Actif pour admin)"})]}),(0,s.jsxs)("select",{required:!0,value:n.status,onChange:e=>l({...n,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white",children:[(0,s.jsx)("option",{value:"active",children:"Actif (Approuv\xe9)"}),(0,s.jsx)("option",{value:"inactive",children:"Inactif"}),(0,s.jsx)("option",{value:"pending",children:"En attente"}),(0,s.jsx)("option",{value:"suspended",children:"Suspendu"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Les acteurs cr\xe9\xe9s par l'admin sont automatiquement approuv\xe9s (statut: Actif, v\xe9rifi\xe9: Oui)"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"verified",checked:n.verified,onChange:e=>l({...n,verified:e.target.checked}),className:"w-4 h-4 text-blue-900 border-gray-300 rounded focus:ring-blue-900"}),(0,s.jsx)("label",{htmlFor:"verified",className:"ml-2 text-sm font-medium text-gray-700",children:"Acteur v\xe9rifi\xe9"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 mt-6 pt-6 border-t",children:[(0,s.jsx)("button",{type:"button",onClick:r,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors disabled:opacity-50",children:i?"Enregistrement...":t?"Modifier":"Ajouter"})]})]})]})})}var w=r(7689),A=r(2252),k=r(6023),_=r(9376);function S(e){let{onClose:t,onSuccess:r}=e,n=(0,_.useRouter)(),[l,i]=(0,a.useState)(null),[c,d]=(0,a.useState)("travel_agency"),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[j,b]=(0,a.useState)(null),N=(0,a.useRef)(null);(0,a.useEffect)(()=>{(0,k.$8)()||(p("Vous devez \xeatre connect\xe9 pour importer des acteurs. Redirection vers la page de connexion..."),setTimeout(()=>{n.push("/admin/login"),t()},2e3))},[n,t]);let S=async()=>{if(!l){p("Veuillez s\xe9lectionner un fichier");return}if(!(0,k.$8)()){p("Vous devez \xeatre connect\xe9 pour importer des acteurs."),setTimeout(()=>{n.push("/admin/login"),t()},2e3);return}x(!0),p(""),f(""),b(null);try{if(!(0,k.bW)())throw Error("Token d'authentification manquant");let e=new FormData;e.append("file",l),e.append("default_type",c);let t=await y.ZP.post("/tourism-actors/import",e);b(t.data.result),f(t.data.message||"Import r\xe9ussi"),r()}catch(r){var e,s,a;let t="Erreur lors de l'import du fichier";if((null===(e=r.response)||void 0===e?void 0:e.data)&&(r.response.data.message&&(t=r.response.data.message),r.response.data.errors)){let e=[];Object.keys(r.response.data.errors).forEach(t=>{let s=r.response.data.errors[t];Array.isArray(s)?e.push(...s):e.push(s)}),e.length>0&&(t+="\n\n"+e.join("\n"))}p(t),(null===(a=r.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.result)&&b(r.response.data.result)}finally{x(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Importer des acteurs depuis Excel"}),(0,s.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)(v.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Type d'acteur par d\xe9faut ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white",children:[(0,s.jsx)("option",{value:"travel_agency",children:"Agence de Voyage"}),(0,s.jsx)("option",{value:"tour_guide",children:"Guide Touristique"}),(0,s.jsx)("option",{value:"hotel",children:"H\xf4tel"}),(0,s.jsx)("option",{value:"restaurant",children:"Restaurant"}),(0,s.jsx)("option",{value:"transport",children:"Transport"}),(0,s.jsx)("option",{value:"attraction",children:"Attraction"}),(0,s.jsx)("option",{value:"other",children:"Autre"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Ce type sera appliqu\xe9 \xe0 tous les acteurs du fichier si la colonne "Type" n\'est pas pr\xe9sente dans le fichier Excel.'})]}),(0,s.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Instructions :"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"Le fichier doit \xeatre au format Excel (.xlsx, .xls) ou CSV"}),(0,s.jsx)("li",{children:"La premi\xe8re ligne doit contenir les en-t\xeates de colonnes"}),"travel_agency"===c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsx)("strong",{children:"Colonnes requises pour les agences :"})}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"D\xe9nomination Sociale"})]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Ville"})]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Adresse Agence"})," (ou ",(0,s.jsx)("strong",{children:"Adresse"}),")"]}),(0,s.jsx)("li",{children:(0,s.jsx)("strong",{children:"Colonnes optionnelles :"})}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Type"}),", ",(0,s.jsx)("strong",{children:"Cat\xe9gorie"}),", ",(0,s.jsx)("strong",{children:"T\xe9l\xe9phone"}),", ",(0,s.jsx)("strong",{children:"Email"}),", ",(0,s.jsx)("strong",{children:"Site Web"}),", ",(0,s.jsx)("strong",{children:"R\xe9gion"}),", ",(0,s.jsx)("strong",{children:"Description"})]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Langue de travail"}),' (s\xe9par\xe9es par virgule : ex: "FR, EN, AR")']}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Num\xe9ro Accr\xe9ditation"}),", ",(0,s.jsx)("strong",{children:"Statut"})]})]}):"tour_guide"===c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsx)("strong",{children:"Colonnes requises pour les guides :"})}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Nom"})," (nom de famille)"]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Pr\xe9nom"})," (sera combin\xe9 avec Nom pour cr\xe9er le nom complet)"]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Ville"})]}),(0,s.jsx)("li",{children:(0,s.jsx)("strong",{children:"Colonnes optionnelles :"})}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Cat\xe9gorie"}),' (ex: "Guide de Montagne", "Guide du Tourisme", "Accompagnateur du Tourisme")']}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Langue de travail"}),' (s\xe9par\xe9es par virgule ou tiret : ex: "FR", "FR, EN", "FR-ANG ALL")']}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"T\xe9l\xe9phone"}),", ",(0,s.jsx)("strong",{children:"Email"}),", ",(0,s.jsx)("strong",{children:"R\xe9gion"}),", ",(0,s.jsx)("strong",{children:"Description"})]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Num\xe9ro Accr\xe9ditation"}),", ",(0,s.jsx)("strong",{children:"Statut"})]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Adresse"})," (optionnel, sera g\xe9n\xe9r\xe9e automatiquement si absente)"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsx)("strong",{children:"Colonnes requises :"})}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"D\xe9nomination Sociale"})," OU ",(0,s.jsx)("strong",{children:"Nom"})," (ou les deux : ",(0,s.jsx)("strong",{children:"Nom"})," + ",(0,s.jsx)("strong",{children:"Pr\xe9nom"}),")"]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Ville"})]}),(0,s.jsx)("li",{children:(0,s.jsx)("strong",{children:"Colonnes optionnelles :"})}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Pr\xe9nom"}),", ",(0,s.jsx)("strong",{children:"Adresse"}),", ",(0,s.jsx)("strong",{children:"Type"}),", ",(0,s.jsx)("strong",{children:"Cat\xe9gorie"})]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"T\xe9l\xe9phone"}),", ",(0,s.jsx)("strong",{children:"Email"}),", ",(0,s.jsx)("strong",{children:"Site Web"}),", ",(0,s.jsx)("strong",{children:"R\xe9gion"}),", ",(0,s.jsx)("strong",{children:"Description"})]}),(0,s.jsxs)("li",{className:"ml-4",children:["- ",(0,s.jsx)("strong",{children:"Langue de travail"}),", ",(0,s.jsx)("strong",{children:"Num\xe9ro Accr\xe9ditation"}),", ",(0,s.jsx)("strong",{children:"Statut"})]})]}),(0,s.jsx)("li",{children:'La colonne "Type" est optionnelle. Si absente, le type s\xe9lectionn\xe9 ci-dessus sera appliqu\xe9 \xe0 tous les acteurs.'}),(0,s.jsx)("li",{children:'Si la colonne "Type" existe dans le fichier, elle sera utilis\xe9e en priorit\xe9.'}),(0,s.jsx)("li",{children:"Statuts possibles : active, inactive, pending, suspended"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=[],t="template_import_acteurs.csv";"travel_agency"===c?(e=[["D\xe9nomination Sociale","Ville","Adresse Agence","Type","Cat\xe9gorie","T\xe9l\xe9phone","Email","Site Web","R\xe9gion","Description","Num\xe9ro Accr\xe9ditation","Statut","Langue de travail"],["AGENCE DE VOYAGES ALSUBHI","AGADIR","RUE DARAA N\xb0 02 HAY AL QODS","travel_agency","standard","+212 5 28 12 34 56","contact@alsubhi.ma","https://www.alsubhi.ma","Souss-Massa","Agence de voyages sp\xe9cialis\xe9e","MATA-001","active","FR, AR"],["KAOUTAR TOUR","AGADIR","34 RUE DES ORANGERS","travel_agency","premium","+212 5 28 98 76 54","info@kaoutartour.ma","https://www.kaoutartour.ma","Souss-Massa","Agence de voyages premium","MATA-002","active","FR, EN, AR"]],t="template_import_agences.csv"):"tour_guide"===c?(e=[["Nom","Pr\xe9nom","Ville","Type","Cat\xe9gorie","T\xe9l\xe9phone","Email","R\xe9gion","Description","Num\xe9ro Accr\xe9ditation","Statut","Langue de travail"],["AABIDI","Abdelhay","Azilal","tour_guide","Guide de Montagne","+212 6 12 34 56 78","abdelhay@guide.ma","B\xe9ni Mellal-Kh\xe9nifra","Guide touristique certifi\xe9","MATA-G-001","active","FR"],["AACHA","Abdelhak","Marrakech","tour_guide","Guide du Tourisme","+212 6 23 45 67 89","abdelhak@guide.ma","Marrakech-Safi","Guide professionnel","MATA-G-002","active","FR"],["AACHAB","Reddad","Marrakech","tour_guide","Guide du Tourisme","+212 6 34 56 78 90","reddad@guide.ma","Marrakech-Safi","Guide multilingue","MATA-G-003","active","FR, ITA"],["AAFIF","Abderrahma","Casablanca","tour_guide","Guide du Tourisme","+212 6 45 67 89 01","abderrahma@guide.ma","Casablanca-Settat","Guide exp\xe9riment\xe9","MATA-G-004","active","ALL"],["AAJLI","El Houcine","Rabat","tour_guide","Accompagnateur du Tourisme","+212 6 56 78 90 12","elhoucine@guide.ma","Rabat-Sal\xe9-K\xe9nitra","Accompagnateur certifi\xe9","MATA-G-005","active","ALL"]],t="template_import_guides.csv"):(e=[["D\xe9nomination Sociale","Ville","Adresse Agence","Type","Cat\xe9gorie","T\xe9l\xe9phone","Email","Site Web","R\xe9gion","Description","Num\xe9ro Accr\xe9ditation","Statut","Langue de travail"],["EXEMPLE ENTREPRISE","CASABLANCA","123 RUE PRINCIPALE",c,"standard","+212 5 22 12 34 56","contact@exemple.ma","https://www.exemple.ma","Casablanca-Settat","Description de l'entreprise","MATA-001","active","FR, AR"]],t="template_import_acteurs.csv");let r=new Blob(["\uFEFF"+e.map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),a=URL.createObjectURL(r);s.setAttribute("href",a),s.setAttribute("download",t),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"mt-3 text-sm text-blue-900 hover:text-blue-700 underline flex items-center gap-1",children:[(0,s.jsx)(o,{className:"w-4 h-4"}),"T\xe9l\xe9charger le mod\xe8le Excel pour ","travel_agency"===c?"les Agences":"tour_guide"===c?"les Guides":"les Acteurs"]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\xe9lectionner le fichier Excel"}),(0,s.jsxs)("div",{onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.click()},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors",children:[(0,s.jsx)("input",{ref:N,type:"file",accept:".xlsx,.xls,.csv",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(![".xlsx",".xls",".csv"].includes(r.name.substring(r.name.lastIndexOf(".")).toLowerCase())){p("Format de fichier non support\xe9. Veuillez utiliser un fichier Excel (.xlsx, .xls) ou CSV."),i(null);return}i(r),p(""),f("")}},className:"hidden"}),l?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,s.jsx)(o,{className:"w-8 h-8 text-green-500"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:l.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[(l.size/1024).toFixed(2)," KB"]})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(w.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Cliquez pour s\xe9lectionner un fichier"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Formats accept\xe9s : .xlsx, .xls, .csv"})]})]})]}),h&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[(0,s.jsx)(A.Z,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Erreur"}),(0,s.jsx)("div",{className:"text-sm text-red-600 whitespace-pre-line",children:h})]})]}),g&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-start gap-3",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"Succ\xe8s"}),(0,s.jsx)("p",{className:"text-sm text-green-600",children:g})]})]}),j&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"R\xe9sultats de l'import :"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("p",{className:"text-gray-700",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total :"})," ",j.total," ligne(s)"]}),(0,s.jsxs)("p",{className:"text-green-600",children:[(0,s.jsx)("span",{className:"font-medium",children:"R\xe9ussis :"})," ",j.success," acteur(s)"]}),j.errors.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-red-600 mb-1",children:["Erreurs (",j.errors.length,") :"]}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-red-600 space-y-1",children:[j.errors.slice(0,10).map((e,t)=>(0,s.jsx)("li",{className:"text-xs",children:e},t)),j.errors.length>10&&(0,s.jsxs)("li",{className:"text-xs italic",children:["... et ",j.errors.length-10," autre(s) erreur(s)"]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Fermer"}),(0,s.jsx)("button",{onClick:S,disabled:m||!l,className:"px-6 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Import en cours..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{className:"w-4 h-4"}),"Importer"]})})]})]})]})})}var C=r(8695);function E(){let[e,t]=(0,a.useState)([]),[r,v]=(0,a.useState)(!0),[w,A]=(0,a.useState)(""),[k,_]=(0,a.useState)(""),[E,Z]=(0,a.useState)(""),[T,R]=(0,a.useState)(!1),[M,L]=(0,a.useState)(!1),[I,P]=(0,a.useState)(null),[q,F]=(0,a.useState)({current_page:1,last_page:1,per_page:25,total:0}),[G,D]=(0,a.useState)("id"),[V,z]=(0,a.useState)("desc"),[U,O]=(0,a.useState)({total:0,active:0,pending:0,accredited:0});(0,a.useEffect)(()=>{B()},[w,k,E,q.current_page,q.per_page,G,V]);let B=async()=>{v(!0);try{let r=new URLSearchParams;w&&r.append("search",w),k&&r.append("type",k),E?r.append("status",E):r.append("all_status","true"),r.append("per_page",q.per_page.toString()),r.append("page",q.current_page.toString()),r.append("sort_by",G),r.append("sort_direction",V);let s=await y.ZP.get("/tourism-actors?".concat(r.toString()));s.data.success&&(t(s.data.data),s.data.pagination&&(F(e=>({...e,...s.data.pagination,per_page:q.per_page})),O({total:s.data.pagination.total,active:e.filter(e=>"active"===e.status).length,pending:e.filter(e=>"pending"===e.status).length,accredited:e.filter(e=>e.accreditation_number).length})))}catch(e){console.error("Error loading actors:",e),t([])}finally{v(!1)}},H=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet acteur ?"))try{await y.ZP.delete("/tourism-actors/".concat(e)),B()}catch(e){console.error("Error deleting actor:",e),alert("Erreur lors de la suppression")}},X=e=>{P(e),R(!0)},W=e=>{G===e?z("asc"===V?"desc":"asc"):(D(e),z("asc")),F(e=>({...e,current_page:1}))},$=e=>{F(t=>({...t,current_page:e})),window.scrollTo({top:0,behavior:"smooth"})},J=e=>{F(t=>({...t,per_page:e,current_page:1}))},K=e=>{let{field:t}=e;return G!==t?(0,s.jsx)(n.Z,{className:"w-4 h-4 text-gray-400"}):"asc"===V?(0,s.jsx)(l.Z,{className:"w-4 h-4 text-blue-900"}):(0,s.jsx)(i.Z,{className:"w-4 h-4 text-blue-900"})},Y={hotel:"H\xf4tel",restaurant:"Restaurant",travel_agency:"Agence de Voyage",tour_guide:"Guide Touristique",transport:"Transport",attraction:"Attraction",other:"Autre"},Q={active:"Actif",inactive:"Inactif",pending:"En attente",suspended:"Suspendu"};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(C.Z,{title:"Gestion des Acteurs",subtitle:"G\xe9rez tous les acteurs du tourisme accr\xe9dit\xe9s",actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition-colors",children:[(0,s.jsx)(o,{className:"w-4 h-4"}),"Importer Excel"]}),(0,s.jsxs)("button",{onClick:()=>{P(null),R(!0)},className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition-colors",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Ajouter un acteur"]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)("div",{className:"bg-blue-600 rounded-lg shadow-md p-5 text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"Total Acteurs"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:q.total})]}),(0,s.jsx)("div",{className:"bg-white/20 rounded-lg p-3",children:(0,s.jsx)(d.Z,{className:"w-6 h-6"})})]})}),(0,s.jsx)("div",{className:"bg-emerald-600 rounded-lg shadow-md p-5 text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-emerald-100 text-sm font-medium mb-1",children:"Actifs"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.filter(e=>"active"===e.status).length})]}),(0,s.jsx)("div",{className:"bg-white/20 rounded-lg p-3",children:(0,s.jsx)(u.Z,{className:"w-6 h-6"})})]})}),(0,s.jsx)("div",{className:"bg-amber-500 rounded-lg shadow-md p-5 text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-amber-100 text-sm font-medium mb-1",children:"En Attente"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.filter(e=>"pending"===e.status).length})]}),(0,s.jsx)("div",{className:"bg-white/20 rounded-lg p-3",children:(0,s.jsx)(m.Z,{className:"w-6 h-6"})})]})}),(0,s.jsx)("div",{className:"bg-amber-600 rounded-lg shadow-md p-5 text-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-amber-100 text-sm font-medium mb-1",children:"Accr\xe9dit\xe9s"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.filter(e=>e.accreditation_number).length})]}),(0,s.jsx)("div",{className:"bg-white/20 rounded-lg p-3",children:(0,s.jsx)(x.Z,{className:"w-6 h-6"})})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-5 mb-6 border border-gray-200",children:[(0,s.jsx)("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:"Filtres de recherche"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email, ville...",value:w,onChange:e=>{A(e.target.value),F(e=>({...e,current_page:1}))},className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("select",{value:k,onChange:e=>{_(e.target.value),F(e=>({...e,current_page:1}))},className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-blue-900",children:[(0,s.jsx)("option",{value:"",children:"Tous les types"}),(0,s.jsx)("option",{value:"hotel",children:"H\xf4tel"}),(0,s.jsx)("option",{value:"restaurant",children:"Restaurant"}),(0,s.jsx)("option",{value:"travel_agency",children:"Agence de Voyage"}),(0,s.jsx)("option",{value:"tour_guide",children:"Guide Touristique"}),(0,s.jsx)("option",{value:"transport",children:"Transport"}),(0,s.jsx)("option",{value:"attraction",children:"Attraction"})]}),(0,s.jsxs)("select",{value:E,onChange:e=>{Z(e.target.value),F(e=>({...e,current_page:1}))},className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-blue-900",children:[(0,s.jsx)("option",{value:"",children:"Tous les statuts"}),(0,s.jsx)("option",{value:"active",children:"Actif"}),(0,s.jsx)("option",{value:"inactive",children:"Inactif"}),(0,s.jsx)("option",{value:"pending",children:"En attente"}),(0,s.jsx)("option",{value:"suspended",children:"Suspendu"})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200",children:r?(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center py-20",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-900 border-t-transparent"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des donn\xe9es..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W("id"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["ID",(0,s.jsx)(K,{field:"id"})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W("name"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["NOM",(0,s.jsx)(K,{field:"name"})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W("type"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["TYPE",(0,s.jsx)(K,{field:"type"})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W("city"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["VILLE",(0,s.jsx)(K,{field:"city"})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W("status"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["STATUT",(0,s.jsx)(K,{field:"status"})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W("accreditation_number"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["ACCR\xc9DIT\xc9",(0,s.jsx)(K,{field:"accreditation_number"})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACTIONS"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"Aucun acteur trouv\xe9"})}):e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["#",e.id]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.email&&(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:Y[e.type]||e.type})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.city}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"suspended"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:Q[e.status]||e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.accreditation_number?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 text-amber-500"}),(0,s.jsx)("span",{className:"text-sm text-amber-600 font-medium",children:e.accreditation_number})]}):(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"Simple"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.default,{href:"/actors/".concat(e.id),className:"text-blue-600 hover:text-blue-900",title:"Voir",children:(0,s.jsx)(d.Z,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>X(e),className:"text-yellow-600 hover:text-yellow-900",title:"Modifier",children:(0,s.jsx)(p.Z,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>H(e.id),className:"text-red-600 hover:text-red-900",title:"Supprimer",children:(0,s.jsx)(g.Z,{className:"w-5 h-5"})})]})})]},e.id))})]})}),q.total>0&&(0,s.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:["Affichage de ",(0,s.jsx)("span",{className:"font-medium",children:(q.current_page-1)*q.per_page+1})," \xe0"," ",(0,s.jsx)("span",{className:"font-medium",children:Math.min(q.current_page*q.per_page,q.total)})," ","sur ",(0,s.jsx)("span",{className:"font-medium",children:q.total})," r\xe9sultats"]}),(0,s.jsxs)("select",{value:q.per_page,onChange:e=>J(Number(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-sm",children:[(0,s.jsx)("option",{value:10,children:"10 par page"}),(0,s.jsx)("option",{value:25,children:"25 par page"}),(0,s.jsx)("option",{value:50,children:"50 par page"}),(0,s.jsx)("option",{value:100,children:"100 par page"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>$(q.current_page-1),disabled:1===q.current_page||r,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Page pr\xe9c\xe9dente",children:(0,s.jsx)(f.Z,{className:"w-5 h-5"})}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let e=[],t=q.last_page,r=q.current_page;if(t<=7)for(let r=1;r<=t;r++)e.push(r);else if(r<=3){for(let t=1;t<=5;t++)e.push(t);e.push("..."),e.push(t)}else if(r>=t-2){e.push(1),e.push("...");for(let r=t-4;r<=t;r++)e.push(r)}else{e.push(1),e.push("...");for(let t=r-1;t<=r+1;t++)e.push(t);e.push("..."),e.push(t)}return e})().map((e,t)=>"..."===e?(0,s.jsx)("span",{className:"px-2 text-gray-500",children:"..."},"ellipsis-".concat(t)):(0,s.jsx)("button",{onClick:()=>$(e),disabled:r,className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(q.current_page===e?"bg-blue-900 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"," disabled:opacity-50"),children:e},e))}),(0,s.jsx)("button",{onClick:()=>$(q.current_page+1),disabled:q.current_page===q.last_page||r,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Page suivante",children:(0,s.jsx)(j.Z,{className:"w-5 h-5"})})]})]})})]})})]}),T&&(0,s.jsx)(N,{actor:I,onClose:()=>{R(!1),P(null),B()}}),M&&(0,s.jsx)(S,{onClose:()=>L(!1),onSuccess:()=>{L(!1),B()}})]})}},8695:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437);function a(e){let{title:t,subtitle:r,actions:a}=e;return(0,s.jsx)("header",{className:"bg-blue-900 shadow-md border-b border-blue-800",children:(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-white font-serif tracking-tight",children:t}),(0,s.jsx)("p",{className:"text-sm text-blue-200 mt-1 font-normal",children:r})]}),a&&(0,s.jsx)("div",{className:"flex items-center gap-3",children:a})]})})})}},9116:function(e,t,r){"use strict";r.d(t,{Bt:function(){return o},aL:function(){return c},eJ:function(){return i},jB:function(){return u},kN:function(){return m},sZ:function(){return n},wL:function(){return a},yM:function(){return l},zX:function(){return d}});let s=r(3464).Z.create({baseURL:"http://localhost:8000/api",headers:{Accept:"application/json"},withCredentials:!0});{let e=localStorage.getItem("auth_token");e&&(s.defaults.headers.common.Authorization="Bearer ".concat(e))}s.interceptors.request.use(e=>{{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization="Bearer ".concat(t)),e.data instanceof FormData&&delete e.headers["Content-Type"]}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("token"),localStorage.removeItem("user"),delete s.defaults.headers.common.Authorization),Promise.reject(e)});let a=async e=>{try{let t="/tourism-actors".concat(e?"?".concat(e):"");console.log("Fetching from URL:",s.defaults.baseURL+t);let r=await s.get(t);if(console.log("API Response:",r.data),r.data.success&&Array.isArray(r.data.data))return r.data.data;return console.warn("Unexpected response format:",r.data),[]}catch(e){throw console.error("Error fetching actors:",e),e.response&&console.error("Response error:",e.response.data),e}},n=async e=>{try{let t=await s.get("/events".concat(e?"?".concat(e):""));if(t.data.success&&Array.isArray(t.data.data))return t.data.data;return[]}catch(e){throw console.error("Error fetching events:",e),e}},l=async e=>{try{return(await s.post("/events",e)).data.data}catch(e){throw console.error("Error creating event:",e),e}},i=async(e,t)=>{try{return(await s.put("/events/".concat(e),t)).data.data}catch(e){throw console.error("Error updating event:",e),e}},o=async e=>{try{await s.delete("/events/".concat(e))}catch(e){throw console.error("Error deleting event:",e),e}},c=async e=>{try{let t=await s.get("/news".concat(e?"?".concat(e):""));if(t.data.success&&Array.isArray(t.data.data))return t.data.data;return[]}catch(e){throw console.error("Error fetching news:",e),e}},d=async e=>{try{return(await s.post("/news",e)).data.data}catch(e){throw console.error("Error creating news:",e),e}},u=async(e,t)=>{try{console.log("Updating news with FormData:",e),t.has("_method")||t.append("_method","PUT");let r=await s.post("/news/".concat(e),t);if(console.log("Update response:",r.data),r.data.success)return r.data.data;throw Error(r.data.message||"Erreur lors de la mise \xe0 jour")}catch(e){throw console.error("Error updating news:",e),e.response&&(console.error("Error response status:",e.response.status),console.error("Error response data:",e.response.data)),e}},m=async e=>{try{await s.delete("/news/".concat(e))}catch(e){throw console.error("Error deleting news:",e),e}};t.ZP=s},6023:function(e,t,r){"use strict";r.d(t,{$8:function(){return o},Z5:function(){return c},bW:function(){return i},kS:function(){return n},ts:function(){return l},x4:function(){return a}});var s=r(9116);let a=async(e,t)=>{try{let r=await s.ZP.post("/auth/login",{email:e,password:t});return r.data.success&&r.data.data.token&&(localStorage.setItem("auth_token",r.data.data.token),localStorage.setItem("auth_user",JSON.stringify(r.data.data.user)),s.ZP.defaults.headers.common.Authorization="Bearer ".concat(r.data.data.token)),r.data}catch(e){throw console.error("Login error:",e),e}},n=async()=>{try{await s.ZP.post("/auth/logout")}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),delete s.ZP.defaults.headers.common.Authorization}},l=()=>{let e=localStorage.getItem("auth_user");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},i=()=>localStorage.getItem("auth_token"),o=()=>!!i(),c=()=>{let e=i();e&&(s.ZP.defaults.headers.common.Authorization="Bearer ".concat(e))}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=r;return(0,s.createElement)("svg",{ref:l,...a,width:o,height:o,stroke:i,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(n(e)),u].join(" "),...x},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},2252:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5051:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},8842:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},265:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},3327:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},6901:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2451:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4630:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8930:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7689:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(2972),a=r.n(s)},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[3464,2972,2971,2117,1744],function(){return e(e.s=1066)}),_N_E=e.O()}]);