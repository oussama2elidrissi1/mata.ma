(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8499],{4414:function(e,t,a){Promise.resolve().then(a.bind(a,3009))},3009:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(7437),r=a(2265),l=a(9376),n=a(7692),i=a(8420),o=a(2369),c=a(9763);let d=(0,c.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var u=a(8728);let m=(0,c.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var g=a(8930),h=a(9296),x=a(8349),p=a(9116),f=a(6023);function y(){let e=(0,l.useRouter)(),[t,a]=(0,r.useState)(null),[c,y]=(0,r.useState)(!0),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)({name:"",name_ar:"",description:"",description_ar:"",address:"",phone:"",website:"",services:[],languages:[]});(0,r.useEffect)(()=>{(async()=>{let t=(0,f.bW)(),a=(0,f.ts)();if(!t||!a||"actor"!==a.role){y(!1),e.push("/actor/login");return}await Z()})()},[e]);let Z=async()=>{try{let e=await p.ZP.get("/actor/me");if(e.data.success){let t=e.data.data;a(t),k({name:t.name||"",name_ar:t.name_ar||"",description:t.description||"",description_ar:t.description_ar||"",address:t.address||"",phone:t.phone||"",website:t.website||"",services:t.services||[],languages:t.languages||[]})}}catch(a){var t,s;if(console.error("Error loading actor:",a),(null===(t=a.response)||void 0===t?void 0:t.status)===401||(null===(s=a.response)||void 0===s?void 0:s.status)===403){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),e.push("/actor/login");return}}finally{y(!1)}},M=async()=>{v(!0);try{(await p.ZP.put("/actor/update",w)).data.success&&(alert("Informations mises \xe0 jour avec succ\xe8s"),Z())}catch(a){var e,t;alert((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Erreur lors de la mise \xe0 jour")}finally{v(!1)}},_=async e=>{var t,a,s;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;N(!0);let l=new FormData;l.append("logo",r);try{(await p.ZP.post("/actor/logo",l,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(alert("Logo mis \xe0 jour avec succ\xe8s"),Z())}catch(e){alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Erreur lors de l'upload")}finally{N(!1)}},C=async e=>{let t=e.target.files;if(!t||0===t.length)return;N(!0);let a=new FormData;Array.from(t).forEach(e=>{a.append("images[]",e)});try{(await p.ZP.post("/actor/images",a,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(alert("Images ajout\xe9es avec succ\xe8s"),Z())}catch(e){var s,r;alert((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'upload")}finally{N(!1)}},S=async e=>{if(confirm("Supprimer cette image ?"))try{(await p.ZP.delete("/actor/images/".concat(e))).data.success&&(alert("Image supprim\xe9e"),Z())}catch(e){var t,a;alert((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Erreur lors de la suppression")}},I=async()=>{try{await p.ZP.post("/auth/logout")}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("token"),localStorage.removeItem("user"),e.push("/actor/login")}};return c?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 to-blue-700",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white text-lg font-medium",children:"Chargement..."})]})}):t?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(h.Z,{}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-blue-900 mb-2",children:"Mon Espace"}),(0,s.jsx)("p",{className:"text-gray-600",children:"G\xe9rez vos informations et votre profil"})]}),(0,s.jsxs)("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[(0,s.jsx)(n.Z,{className:"w-5 h-5"}),"D\xe9connexion"]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200 sticky top-24",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(null==t?void 0:t.logo)?(0,s.jsx)("img",{src:t.logo,alt:t.name,className:"w-32 h-32 rounded-full mx-auto object-cover border-4 border-blue-900"}):(0,s.jsx)("div",{className:"w-32 h-32 rounded-full mx-auto bg-gradient-to-br from-blue-600 to-amber-600 flex items-center justify-center",children:(0,s.jsx)(i.Z,{className:"w-16 h-16 text-white"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mt-4",children:null==t?void 0:t.name}),(null==t?void 0:t.accreditation_number)&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Accr\xe9ditation: ",t.accreditation_number]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5 text-blue-900"}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Informations"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 text-gray-600 hover:bg-gray-50 rounded-lg cursor-pointer",children:[(0,s.jsx)(d,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Images"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 text-gray-600 hover:bg-gray-50 rounded-lg cursor-pointer",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Param\xe8tres"})]})]})]})}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Informations g\xe9n\xe9rales"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom (FR)"}),(0,s.jsx)("input",{type:"text",value:w.name,onChange:e=>k({...w,name:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom (AR)"}),(0,s.jsx)("input",{type:"text",value:w.name_ar,onChange:e=>k({...w,name_ar:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white",dir:"rtl"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (FR)"}),(0,s.jsx)("textarea",{value:w.description,onChange:e=>k({...w,description:e.target.value}),rows:4,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (AR)"}),(0,s.jsx)("textarea",{value:w.description_ar,onChange:e=>k({...w,description_ar:e.target.value}),rows:4,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white",dir:"rtl"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,s.jsx)("input",{type:"text",value:w.phone,onChange:e=>k({...w,phone:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site web"}),(0,s.jsx)("input",{type:"url",value:w.website,onChange:e=>k({...w,website:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse"}),(0,s.jsx)("input",{type:"text",value:w.address,onChange:e=>k({...w,address:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900 text-gray-900 bg-white"})]}),(0,s.jsxs)("button",{onClick:M,disabled:b,className:"w-full py-3 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,s.jsx)(m,{className:"w-5 h-5"}),b?"Enregistrement...":"Enregistrer les modifications"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Logo"}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(null==t?void 0:t.logo)&&(0,s.jsx)("img",{src:t.logo,alt:"Logo",className:"w-32 h-32 rounded-lg object-cover"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"sr-only",children:"Choisir un logo"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:_,disabled:j,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-900 file:text-white hover:file:bg-blue-800 disabled:opacity-50"})]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"JPG, PNG ou GIF (max 5MB)"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Images"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"sr-only",children:"Ajouter des images"}),(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:C,disabled:j,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-900 file:text-white hover:file:bg-blue-800 disabled:opacity-50"})]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Jusqu'\xe0 10 images (max 5MB chacune)"})]}),(null==t?void 0:t.images)&&t.images.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.images.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("img",{src:e,alt:"Image ".concat(t+1),className:"w-full h-48 object-cover rounded-lg"}),(0,s.jsx)("button",{onClick:()=>S(t),className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(g.Z,{className:"w-4 h-4"})})]},t))})]})]})]})]}),(0,s.jsx)(x.Z,{})]}):null}},8420:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},9219:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},7760:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},598:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},7692:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},9345:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3041:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},8728:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8930:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2351:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},2369:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(2972),r=a.n(s)},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[3464,2972,9815,6258,6124,2971,2117,1744],function(){return e(e.s=4414)}),_N_E=e.O()}]);